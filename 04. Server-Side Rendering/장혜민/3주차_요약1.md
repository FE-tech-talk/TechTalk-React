# 서버 사이드 렌더링
## 4.1 서버 사이드 렌더링이란
### 4.1.1 싱글 페이지 애플리케이션의 세상

#### 싱글 페이지 애플리케이션이란?
- 렌더링과 라우팅에 필요한 대부분의 기능을 서버가 아닌 브라우저의 자바스크립트에 의존하는 방식
- 페이지를 불러온 이후에는 서버에서 HTML을 내려 받지 않고 하나의 페이지에서 모든 작업을 처리.

#### 전통적인 방식의 애플리케이션과 싱글 페이지 애플리케이션의 작동 비교
- 과거 : 페이지 전환이 발생할 때마다 새롭게 페이지를 요청하고, HTML 파싱. 사용자 입장에서는 페이지가 처음부터 만들어지는 것처럼 보인다.
- 싱글페이지: 페이지 전환을 자바스크립트로 한다면 최초 리소스를 다운로드하고 이후 페이지를 전환할 떄 매끄러운 UI를 보여줄 수 있다.

#### 싱글 페이지 렌더링 방식의 JAM 스택의 등장
- 과거 PHP나 JSP 기반 웹 애플리케이션 : 렌더링 서버사이드, JS는 사용자에서 추가적인 경험을 주는 보조적인 수단
- 모듈화 논의, CommonJs와 AMD 등장, 기기 성능 향상, 인터넷 속도 발전
- 자바스크립트 수준에서 MVx 프레임워크 구현 
- 과거 LAMP 스택
- JAM스택: 자바스크립트랑 마크업을 미리 빌드해 두고 정적으로 사용자에게 제공. 이후 작동은 사용자의 클라이언트에서 실행. (서버확장성 증가)
- MERN스택: API서버 자체도 자바스크립트로 구현하는 구조

### 4.1.2 서버 사이드 렌더링이란?
- 최초에 사용자에게 보여줄 페이지를 서버에서 렌더링해 빠르게 사용자에게 화면을 제공하는 방식.
- 차이
    - 싱글 페이지 어플리케이션: 사용자에게 제공되는 자바스크립트 번들에서 렌더링
    - 서버 사이드 방식: 렌더링에 필요한 방식을 모두 서버에서 수행

#### 서버 사이드 렌더링의 장점
- 최초 페이지 진입이 비교적 빠르다. 렌더링이 HTTP 요청에 의존적이거나 렌더링해야 할 HTML의 크기가 커진다면 상대적으로 서버 사이드 렌더링이 더 빠를 수 있다.
- 검색 엔진과 메타데이터 제공이 쉽다.
- 누적 레이아웃 이동이 적다.
- 사용자의 디바이스 성능에 비교적 자유롭다. 
- 보안에 좀 더 안전하다. 서버 사이드 렌더링의 경우 인증 혹은 민감한 작업을 서버에서 수행하고 그 결과만 브라우저에 제공해 이러한 보안 위협을 피할 수 있다.

#### 단점
- 소스코드를 작성할 때 항상 서버를 고려해야 한다. window 등 브라우저에만 있는 전역 객체를 서버에서 실행된다면 에러를 마주치게 된다.
- 적절한 서버가 구축돼 있어야 한다. 사용자의 요청을 받아 렌더링을 수행할 서버가 필요하다.
- 서비스 지연에 따른 문제. 최초 렌더링에서 지연이 발생하면 사용자가 작업이 진행 중임을 알 수 없다.

### 4.1.3 SPA와 SSR을 모두 알아야 하는 이유
- 잘못된 웹페이지 설계는 성능 저하, 서버와 클라이언트 두 군데로 관리 포인트만 늘어남.
- SPA: 브라우저 API와 자바스크립트를 활용한 라우팅 기반으로 한 매끄러운 라우팅
- 평균적인 싱글 페이지 애플리케이션은 평균적인 멀티 페이지 애플리케이션보다 느리다.
- 현대의 서버 사이드 렌더링은 최초 웹사이트 진입 시에는 서버 사이드 렌더링 방식으로 서버에서 완성된 HTML을 제공받고, 이후 라우팅에서는 서버에서 내려받은 자바스크립트를 바탕으로 마치 싱글 페이지 애플리케이션 처럼 작동한다.
