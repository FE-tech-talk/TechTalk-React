# 2. 리액트 서버 컴포넌트

서버 사이드 렌더링(SSR)과 완전히 다른 개념

## 2-1. 기존 리액트 컴포넌트와 서버 사이드 렌더링의 한계

### 서버 사이드 렌더링

미리 서버에서 DOM 만듦 -> 클라이언트에서 만들어진 DOM 기준으로 `Hydration` -> 브라우저에서 상태 추적 -> 이벤트 핸들러를 DOM에 추가 -> 응답에 따라 렌더링 트리 변경

### 서버 사이드 렌더링 한계점

- 자바스크립트 번들 크기가 0인 컴포넌트 만들 수 없음
- 백엔드 리소스에 대한 직접적인 접근이 불가능함
- 코드 자동 분할(code split) 불가능
- 연쇄적으로 발생하는 클라이언트와 서버 요청을 대응하기 어려움
- 추상화에 드는 비용 증가

## 2-2. 서버 컴포넌트란?

`서버 컴포넌트`란?

> 하나의 언어, 하나의 프레임워크, 하나의 API와 개념을 사용하면서 서버와 클라이언트 모두에서 컴포넌트를 렌더링할 수 있는 기법
> <br>
> => 즉, 일부 컴포넌트는 클라이언트에서 일부 컴포넌트는 서버에서 렌더링
> <br>
> => But, 클라이언트 컴포넌트는 서버 컴포넌트를 import 할 수 없음

### 서버 컴포넌트

- 요청이 오면 그 순간 서버에서 딱 한 번 실행돼 상태 가질 수 없음
- 렌더링 생명주기 사용 못 함
- effect, state에 의존하는 사용자 정의 훅 사용 못 함
- DOM API, window, document 등에 접근 못 함
- DB, 내부 서비스, 파일 시스템 등 서버에 있는 데이터를 async/await 으로 접근
- 다른 서버 컴포넌트 or 클라이언트 컴포넌트 렌더링할 수 있음

### 클라이언트 컴포넌트

- 서버 컴포넌트를 불러오거나, 서버 전용 훅이나 유틸리트 못 불러옴
- 클라이언트 컴포넌트가 자식으로 서버 컴포넌트를 가질 수 있음
- 우리가 일고 있는 일반적인 리액트 컴포넌트와 같음

### 공용 컴포넌트

- 서버와 클라이언트 모두 사용할 수 있음

## 2-3. 서버 사이드 렌더링과 서버 컴포넌트 차이

### 서버 사이드 렌더링

응답받은 페이지 전체를 HTML로 렌더링하는 과정을 서버에서 수행한 후 그 결과를 클라이언트에 내려줌, 이후 클라이언트에서 하이드레이션 과정을 거쳐 서버 결과물을 확인하고 이벤트를 붙이는 작업 수행

## 2-4. 서버 컴포넌트는 어떻게 작동하는가?

1. 서버가 렌더링 요청 받음
2. 서버는 받은 요청에 따라 컴포넌트를 JSON 으로 직렬화
3. 브라우저가 리액트 컴포넌트 트리 구성
